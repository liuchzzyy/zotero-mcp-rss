TASK#1

请你仔细检查整个库的代码架构，优化和整理，减少代码冗余。
代码框架分成三个阶段：

第一阶段：信息获取与初步筛选
输入源：RSS 订阅 + Gmail 邮箱

处理流程：

1. 从以上来源获取条目信息。
2. 调用 AI API（DeepSeek / Gemini / OpenAI）对条目进行关键词确认与内容筛选。
3. 将筛选后的有效条目保存至 Zotero 指定的文件夹中。

第二阶段：AI 深度分析与整理
操作对象：Zotero 中特定文件夹内的条目

执行条件：条目需同时包含 PDF 文件 与 Note

处理流程：

1. 根据预设模板中的问题，调用 AI API 对条目进行分析并生成回答。
2. 生成带有 Tags 的新 Note，并删除该条目下所有已有的旧 Note。
3. 处理完成后，将条目移转到另一个指定的目标文件夹。

第三阶段：全局扫描与遗漏处理
扫描范围：Zotero 中所有条目

跳过条件（满足任一即忽略）：

1. 条目不包含 PDF

2. 条目已带有第二阶段生成的特定 Tags 与 Note

3. 每次最大处理的条目数量为 20

处理方式：
对不符合跳过条件的剩余条目，自动执行 第二阶段 的 AI 分析流程。

###################################
TASK#2

请你仔细检查GMAIL的相关代码架构，优化和整理，减少代码冗余。
我们通过以下步骤来处理Gmail中的邮件：首先，读取收件箱内来自指定发件人（GMAIL_SENDER_FILTER="scholaralerts-noreply@google.com"）的邮件，并将其全部标记为已读。接着，利用DeepSeek，openai, gemini API 提取的关键词，对这些邮件中包含的文章条目进行进一步筛选。针对符合要求的文章，获取其URL和标题，并通过Crossref API 或 OpenAlex API 补全其他必要信息（例如DOI）。最后，将邮箱中这些邮件移动到垃圾箱，将整理好的文献条目保存至Zotero中的指定文件夹。所有相关配置信息均可通过.env文件进行设置。

###################################
TASK#3

请你仔细检查RSS的相关代码架构，优化和整理，减少代码冗余。
我们通过以下步骤来处理RSS源中的条目：首先，读取预设的RSS订阅源，获取最新的文章条目（默认15天内）。接着，利用DeepSeek，OpenAI，Gemini API 提取的关键词，对这些条目进行初步筛选。针对符合要求的文章，获取其URL,标题和DOI（如果有DOI）以及其他信息，并通过Crossref API 或 OpenAlex API 补全其他必要信息。最后，将整理好的文献条目保存至Zotero中的指定文件夹。所有相关配置信息均可通过.env文件进行设置。

###################################
TASK#4
请你仔细检查Zotero的相关代码架构，优化和整理，减少代码冗余。
其中涉及到AI分析文章条目的问题模板，我想将其移动到文件.env中进行配置管理，方便后续的修改和维护。
另外，请确保Zotero相关代码能够高效地与AI API（DeepSeek / Gemini / OpenAI）进行交互，提升分析和整理条目的速度和准确性。 
另外对于AI生成的Note，对于它的主题样式，请参考 https://github.com/evgo2017/typora-theme-orange-heart ，优化Note的视觉效果，使其在Zotero中更易于阅读和理解。这个主题也写成.env文件中的配置项，方便后续调整。

###################################
TASK#5
请你仔细检查AI API交互的相关代码架构，优化和整理，减少代码冗余。
确保AI API交互模块具备以下功能：
1. 支持DeepSeek, Gemini, OpenAI三种API的无缝切换与调用。优先级顺序为DeepSeek > Gemini > OpenAI。
2. 提供统一的接口，方便其他模块调用AI功能。
3. 实现错误处理与重试机制，确保在API调用失败时能够自动重试，提升系统的稳定性。
4. 优化请求与响应的处理流程，提升整体交互效率，减少延迟。

###################################
TASK#6
请你仔细检查Crossref API和OpenAlex API交互的相关代码架构，优化和整理，减少代码冗余。
确保API交互模块具备以下功能：
1. 支持Crossref和OpenAlex两种API的无缝切换与调用。优先级顺序为Crossref > OpenAlex。
2. 提供统一的接口，方便其他模块调用文献信息补全功能。
3. 实现错误处理与重试机制，确保在API调用失败时能够自动重试，提升系统的稳定性。
4. 优化请求与响应的处理流程，提升整体交互效率，减少延迟。

###################################
TASK#7
请你仔细检查.env配置文件的相关代码架构，优化和整理，减少代码冗余。
确保配置文件具备以下功能：
1. 集中管理所有模块的配置信息，方便后续修改和维护。
2. 支持不同环境（开发、测试、生产）的配置切换。
3. 提供清晰的注释，说明每个配置项的用途和可选值。
4. 优化配置读取与解析的流程，提升系统启动速度。

###################################
TASK#8
请你仔细检查日志记录与监控的相关代码架构，优化和整理，减少代码冗余。
确保日志记录与监控模块具备以下功能：
1. 记录系统各模块的关键操作与异常情况，方便后续排查与分析。
2. 支持不同日志级别（DEBUG、INFO、WARNING、ERROR）的设置与切换。
3. 提供实时监控功能，及时发现系统运行中的异常与瓶颈。
4. 优化日志写入与存储的流程，提升整体系统性能。
5. 支持日志轮转与归档，防止日志文件过大影响系统运行。
6. 保证 github actions 能够正确获取并展示日志内容。
7. github actions 日志内容需要包含每个任务的开始时间、结束时间、处理的条目数量以及可能出现的错误信息，方便后续分析和优化工作流程。
8. 确保日志格式统一，便于阅读和解析。
9. github 只保存近3天的日志内容，防止日志数据过多影响存储空间。